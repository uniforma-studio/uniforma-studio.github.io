function setCookie(o,t,e){var n="";if(e){var a=new Date;a.setTime(a.getTime()+24*e*60*60*1e3),n="; expires="+a.toUTCString()}document.cookie=o+"="+(t||"")+n+"; path=/"}function getCookie(o){for(var t=o+"=",e=document.cookie.split(";"),n=0;n<e.length;n++){for(var a=e[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}function eraseCookie(o){document.cookie=o+"=; Max-Age=-99999999;"}function autoExpand(o){if(o&&o.value){o.style.height="inherit";var t=o.scrollHeight;o.style.height=t+"px"}}function getRandomIndex(o){return Math.floor(Math.random()*o.length)}function arrayContainsArray(o,t){return 0!==t.length&&t.every(function(t){return o.indexOf(t)>=0})}function unique(o,t,e){return e.indexOf(o)==t}function cartesianProduct(o){var t,e,n,a,r,i=[];if(!o||0==o.length)return o;for(r=o.splice(0,1)[0],o=cartesianProduct(o),t=0,n=r.length;t<n;t++)if(o&&o.length)for(e=0,a=o.length;e<a;e++)i.push([r[t]].concat(o[e]));else i.push([r[t]]);return i}function enableAddButton(o){var t=$(".add-to-cart-button"),e=t.attr("data-add-title");t.attr("disabled",!1),priceTitle=o?" - "+Format.money(o,!0,!0):"",t.html(e+priceTitle)}function disableAddButton(o){var t=$(".add-to-cart-button"),e=t.attr("data-add-title");if("sold-out"==o)e=t.attr("data-sold-title");t.is(":disabled")||t.attr("disabled","disabled"),t.html(e)}function enableSelectOption(o){o.removeAttr("disabled"),o.text(o.attr("data-name")),o.removeAttr("disabled-type"),o.parent().is("span")&&o.unwrap()}function disableSelectOption(o,t){if("sold-out"===t&&(disabled_text=o.parent().attr("data-sold-text"),disabled_type="sold-out","false"===show_sold_out_product_options?hide_option=!0:hide_option=!1),"unavailable"===t&&(disabled_text=o.parent().attr("data-unavailable-text"),disabled_type="unavailable",hide_option=!0),o.val()>0){var e=o.attr("data-name");o.attr("disabled",!0),o.text(e+" "+disabled_text),o.attr("disabled-type",disabled_type),!0===hide_option&&(o.parent().is("span")||o.wrap("<span>"))}}function processProduct(o){o.has_option_groups&&(disableAddButton("add-to-cart"),setInitialProductOptionStatuses(o),$(".product_option_group").on("change",function(){disableAddButton("add-to-cart"),$("#option").val(0),processAvailableDropdownOptions(o,$(this))}),$("#option").val()>0&&enableAddButton()),$(".product_option_select").length&&(disableAddButton(),"false"===show_sold_out_product_options&&$('option[disabled-type="sold-out"]').wrap("<span>"))}function createCartesianProductOptions(o){for(product_option_groups=[],ogIndex=0;ogIndex<o.option_groups.length;ogIndex++){for(product_option_group_group_values=[],ogvIndex=0;ogvIndex<o.option_groups[ogIndex].values.length;ogvIndex++)product_option_group_group_values.push(o.option_groups[ogIndex].values[ogvIndex].id);product_option_groups.push(product_option_group_group_values)}return cartesianProduct(product_option_groups)}function setInitialProductOptionStatuses(o){for(product_option_group_values=[],ogIndex=0;ogIndex<o.option_groups.length;ogIndex++)for(ogvIndex=0;ogvIndex<o.option_groups[ogIndex].values.length;ogvIndex++)product_option_group_values.push(o.option_groups[ogIndex].values[ogvIndex].id);for(cartesian_options=createCartesianProductOptions(o),pogv=0;pogv<product_option_group_values.length;pogv++){var t=product_option_group_values[pogv],e=0,n=0,a=0;for(co=0;co<cartesian_options.length;co++)cartesian_options[co].includes(t)&&(product_option=findProductOptionByValueArray(o.options,cartesian_options[co]),product_option&&(a++,product_option.sold_out&&n++),e++);dropdown_select=$(".product_option_group option[value='"+t+"']"),0!==a&&e!==n||(0===a&&(disable_type="unavailable"),e===n&&(disable_type="sold-out"),disableSelectOption(dropdown_select,disable_type))}}function processAvailableDropdownOptions(o,t){if(selected_values=getSelectedValues(),num_selected=selected_values.count(o=>o>0),allSelected=selected_values.every(isGreaterThanZero),num_option_groups=o.option_groups.length,changed_value=parseInt(t.val()),selected_value=[],selected_value.push(changed_value),this_group_id=t.attr("data-group-id"),$(".product_option_group").not(t).find("option").each(function(o,t){t.value>0&&enableSelectOption($(t))}),cartesian_options=createCartesianProductOptions(o),1===num_selected&&num_option_groups>1)for(ogIndex=0;ogIndex<o.option_groups.length;ogIndex++){var e=o.option_groups[ogIndex];if(e.id!=this_group_id)for(ogvIndex=0;ogvIndex<e.values.length;ogvIndex++){var n=e.values[ogvIndex];option_group_value_array=[],option_group_value_array.push(changed_value),option_group_value_array.push(parseInt(n.id));var a=0,r=0,s=0;for(co=0;co<cartesian_options.length;co++)arrayContainsArray(cartesian_options[co],option_group_value_array)&&(product_option=findProductOptionByValueArray(o.options,cartesian_options[co]),product_option&&(s++,product_option.sold_out&&r++),a++);dropdown_select=$(".product_option_group option[value='"+n.id+"']"),0!==s&&a!==r||(0===s&&(disable_type="unavailable"),a===r&&(disable_type="sold-out"),disableSelectOption(dropdown_select,disable_type))}}if(2===num_selected&&3===num_option_groups)for($(".product_option_group").each(function(o,t){0==t.value&&(unselected_group_id=parseInt($(t).attr("data-group-id")))}),ogIndex=0;ogIndex<o.option_groups.length;ogIndex++)if((e=o.option_groups[ogIndex]).id!=this_group_id)for(ogvIndex=0;ogvIndex<e.values.length;ogvIndex++){n=e.values[ogvIndex],option_group_value_array=[],option_group_value_array.push(changed_value),option_group_value_array.push(parseInt(n.id));a=0,r=0,s=0;for(co=0;co<cartesian_options.length;co++)arrayContainsArray(cartesian_options[co],option_group_value_array)&&(product_option=findProductOptionByValueArray(o.options,cartesian_options[co]),product_option&&(s++,product_option.sold_out&&r++),a++);if(e.id===unselected_group_id){for(option_group_value_array=[],option_group_value_array.push(parseInt(n.id)),svIndex=0;svIndex<selected_values.length;svIndex++)selected_values[svIndex]>0&&option_group_value_array.push(selected_values[svIndex]);product_option=findProductOptionByValueArray(o.options,option_group_value_array),dropdown_select=$(".product_option_group option[value='"+n.id+"']"),product_option?product_option.sold_out&&disableSelectOption(dropdown_select,"sold-out"):disableSelectOption(dropdown_select,"unavailable")}dropdown_select=$(".product_option_group option[value='"+n.id+"']"),0!==s&&a!==r||(0===s&&(disable_type="unavailable"),a===r&&(disable_type="sold-out"),disableSelectOption(dropdown_select,disable_type))}num_selected>1&&allSelected&&$(".product_option_group").not(t).each(function(t,e){(e=$(e)).find("option").each(function(t,n){if(is_selected=$(n).is(":selected"),!is_selected&&n.value>0)for(option_group_value_array=[],option_group_value_array.push(parseInt(n.value)),$(".product_option_group").not(e).each(function(o,t){option_group_value_array.push(parseInt(t.value))}),product_option=findProductOptionByValueArray(o.options,option_group_value_array),i=0;i<option_group_value_array.length;i++)dropdown_select=$(".product_option_group option[value='"+option_group_value_array[i]+"']").not(":selected"),dropdown_select&&(product_option?product_option.sold_out?disableSelectOption(dropdown_select,"sold-out"):enableSelectOption(dropdown_select):disableSelectOption(dropdown_select,"unavailable"))})}),allSelected&&(product_option=findProductOptionByValueArray(o.options,selected_values),product_option&&!product_option.sold_out&&product_option.id>0?($("#option").val(product_option.id),enableAddButton(product_option.price)):disableAddButton("sold-out"))}function findProductOptionByValueArray(o,t){for(var e=0;e<o.length;e++)if(option_group_values=o[e].option_group_values,option_ids=[],option_group_values.forEach(function(o){option_ids.push(o.id)}),arrayContainsArray(option_ids,t))return o[e]}function getSelectedValues(){return selected_values=[],$(".product_option_group").each(function(o,t){selected_values.push(parseInt(t.value))}),selected_values}var inPreview=/\/admin\/design/.test(top.location.pathname);API.onError=function(o){var t=$(".error-list");$.each(o,function(o,e){t.append('<div class="error-list-item">').html(e)}),$(".error-modal").show()},$(".product-form").submit(function(o){o.preventDefault();var t=1,e=$("#option").val(),n=$(".add-to-cart-button");if(n.length)var a=n,r=n,i=n.html();var s=a.data("added-text"),d=a.data("adding-text");a.hasClass("adding")||t>0&&e>0&&(a.addClass("adding"),a.blur(),Cart.addItem(e,t,function(o){setTimeout(function(){r.html(d),setTimeout(function(){r.html(s),$(".cart-item-count").html(o.item_count),$(".cart-item-count").removeClass("no-items"),a.removeClass("adding"),setTimeout(function(){r.html(i)},900)},600)},300)}))});var nav_position=$(".header-nav-container").offset().top,header_nav_height=$(".header-nav-container").outerHeight();if($(".open-overlay").click(function(){$(window).width()<=767&&($(this).parent().addClass("overlay-open"),$("body").addClass("no-scroll"))}),$(".close-overlay").click(function(o){o.preventDefault(),$(this).parent().removeClass("overlay-open"),$("body").removeClass("no-scroll")}),$(".close-errors").click(function(){$(".error-modal").hide()}),$(document).on("keyup",function(o){27==o.keyCode&&$(".error-modal").is(":visible")&&$(".error-modal").hide()}),$(".cart-item-remove").click(function(){return $(this).closest("li").find("input.option-quantity").val(0).closest("form").submit(),!1}),$(".option-quantity").blur(function(){return $(this).closest("form").submit(),!1}),$('.contact-form input[type="text"], .contact-form textarea').focus(function(){$(this).parents(".contact-form-group").addClass("focused")}),$('.contact-form input[type="text"], .contact-form textarea').blur(function(){0==$(this).val().length?($(this).removeClass("filled"),$(this).parents(".contact-form-group").removeClass("focused")):$(this).addClass("filled")}),$(document).ready(function(){if($('.contact-form input[type="text"], .contact-form textarea').each(function(){$(this).val().length>0&&($(this).addClass("filled"),$(this).parents(".contact-form-group").addClass("focused"))}),autoExpand($("textarea")[0]),$(".all-similar-products").length){$(".all-similar-products > a").length;for(var o=$(".all-similar-products").children().toArray(),t=3,e=1;e<=t;e++){var n=getRandomIndex(o);$(".similar-product-list").append($(".all-similar-products").children().eq(n)),o.splice(n,1),$(".similar-product-list .similar-product-list-image").each(function(){$(this).attr("src",$(this).data("src"))})}$(".all-similar-products").remove()}}),String.prototype.hashCode=function(){var o,t=0;if(0===this.length)return t;for(o=0;o<this.length;o++)t=(t<<5)-t+this.charCodeAt(o),t|=0;return t},$(".flash-message-text").length){var announcementMessage=$(".flash-message-text").html(),hashedMessage=announcementMessage.hashCode(),cookieValue=getCookie("hide-announcement-message");cookieValue?cookieValue!=hashedMessage&&$("body").addClass("has-flash-message"):$("body").addClass("has-flash-message")}$(".flash-message-close").click(function(){$(".flash-message").slideUp("fast",function(){$("body").removeClass("has-flash-message"),setCookie("hide-announcement-message",hashedMessage,7)})}),document.addEventListener("input",function(o){"textarea"===o.target.tagName.toLowerCase()&&autoExpand(o.target)},!1);var isGreaterThanZero=function(o){return o>0};Array.prototype.equals=function(o){if(!o)return!1;if(this.length!=o.length)return!1;for(var t=0,e=this.length;t<e;t++)if(this[t]instanceof Array&&o[t]instanceof Array){if(!this[t].equals(o[t]))return!1}else if(this[t]!=o[t])return!1;return!0},Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(o,t){function e(o,t){return o===t||"number"==typeof o&&"number"==typeof t&&isNaN(o)&&isNaN(t)}if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),a=n.length>>>0;if(0===a)return!1;for(var r=0|t,i=Math.max(r>=0?r:a-Math.abs(r),0);i<a;){if(e(n[i],o))return!0;i++}return!1}}),Array.prototype.count=function(o){return this.reduce((t,e)=>o(e)?t+1:t,0)},$(".product_option_select").on("change",function(){enableAddButton($(this).find("option:selected").attr("data-price"))});